<?xml version="1.0" encoding="UTF-8"?>
<assessmentItem adaptive="false" identifier="{{IDENTIFIER}}" inspera:objectType="content_question_qti2_text_entry_math" timeDependent="false" title="{{TITLE}}" xmlns="http://www.imsglobal.org/xsd/imsqti_v2p2" xmlns:inspera="http://www.inspera.no/qti" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.imsglobal.org/xsd/imsqti_v2p2 http://www.imsglobal.org/xsd/qti/qtiv2p2/imsqti_v2p2.xsd">

    {{RESPONSE_DECLARATIONS}}

    <outcomeDeclaration baseType="float" cardinality="single" identifier="SCORE">
        <defaultValue>
            <value>0</value>
        </defaultValue>
    </outcomeDeclaration>
    <outcomeDeclaration baseType="identifier" cardinality="single" identifier="FEEDBACK"/>

    {{OUTCOME_DECLARATIONS}}

    <templateDeclaration baseType="float" cardinality="single" identifier="SCORE_EACH_CORRECT">
        <defaultValue><value>{{POINTS_EACH_CORRECT}}</value></defaultValue>
    </templateDeclaration>

    <templateDeclaration baseType="float" cardinality="single" identifier="SCORE_EACH_WRONG">
        <defaultValue><value>{{POINTS_EACH_WRONG}}</value></defaultValue>
    </templateDeclaration>
    <templateDeclaration baseType="float" cardinality="single" identifier="SCORE_ALL_CORRECT">
        <defaultValue><value/></defaultValue>
    </templateDeclaration>
    <templateDeclaration baseType="float" cardinality="single" identifier="SCORE_MINIMUM">
        <defaultValue><value/></defaultValue>
    </templateDeclaration>
    <templateDeclaration baseType="float" cardinality="single" identifier="SCORE_UNANSWERED">
        <defaultValue><value>0</value></defaultValue>
    </templateDeclaration>

    <itemBody inspera:defaultLanguage="{{LANGUAGE}}" inspera:supportedLanguages="{{LANGUAGE}}">
        {{QUESTION_TEXT_WITH_FIELDS}}
    </itemBody>

    <responseProcessing>
        {{FIELD_SCORING_LOGIC}}

        <responseCondition>
            <responseIf>
                <and>
                    {{UNANSWERED_CHECKS}}
                </and>
                <setOutcomeValue identifier="SCORE">
                    <variable identifier="SCORE_UNANSWERED"/>
                </setOutcomeValue>
            </responseIf>
            <responseElse>
                <setOutcomeValue identifier="SCORE">
                    <sum>
                        <variable identifier="SCORE"/>
                    </sum>
                </setOutcomeValue>
            </responseElse>
        </responseCondition>

        <responseCondition>
            <responseIf>
                <and>
                    {{UNANSWERED_CHECKS}}
                </and>
                <setOutcomeValue identifier="FEEDBACK">
                    <baseValue baseType="identifier">feedback_unanswered</baseValue>
                </setOutcomeValue>
            </responseIf>
            <responseElseIf>
                <and>
                    {{ALL_CORRECT_CHECKS}}
                </and>
                <setOutcomeValue identifier="FEEDBACK">
                    <baseValue baseType="identifier">feedback_correct</baseValue>
                </setOutcomeValue>
            </responseElseIf>
            <responseElseIf>
                <or>
                    {{ANY_CORRECT_CHECKS}}
                </or>
                <setOutcomeValue identifier="FEEDBACK">
                    <baseValue baseType="identifier">feedback_partially_correct</baseValue>
                </setOutcomeValue>
            </responseElseIf>
            <responseElse>
                <setOutcomeValue identifier="FEEDBACK">
                    <baseValue baseType="identifier">feedback_wrong</baseValue>
                </setOutcomeValue>
            </responseElse>
        </responseCondition>

        <responseCondition inspera:type="max_score_upper_bound">
            <responseIf>
                <and>
                    <gte>
                        <variable identifier="SCORE"/>
                        <baseValue baseType="float">{{MAX_SCORE}}</baseValue>
                    </gte>
                </and>
                <setOutcomeValue identifier="SCORE">
                    <baseValue baseType="float">{{MAX_SCORE}}</baseValue>
                </setOutcomeValue>
            </responseIf>
        </responseCondition>
    </responseProcessing>

    <modalFeedback identifier="feedback_unanswered" outcomeIdentifier="FEEDBACK" showHide="show">{{FEEDBACK_UNANSWERED}}</modalFeedback>
    <modalFeedback identifier="feedback_wrong" outcomeIdentifier="FEEDBACK" showHide="show">{{FEEDBACK_INCORRECT}}</modalFeedback>
    <modalFeedback identifier="feedback_correct" outcomeIdentifier="FEEDBACK" showHide="show">{{FEEDBACK_CORRECT}}</modalFeedback>
    <modalFeedback identifier="feedback_partially_correct" outcomeIdentifier="FEEDBACK" showHide="show">{{FEEDBACK_PARTIALLY_CORRECT}}</modalFeedback>

</assessmentItem>
